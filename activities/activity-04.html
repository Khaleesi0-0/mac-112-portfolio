<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.433">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Bivariate viz</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="activity-04_files/libs/clipboard/clipboard.min.js"></script>
<script src="activity-04_files/libs/quarto-html/quarto.js"></script>
<script src="activity-04_files/libs/quarto-html/popper.min.js"></script>
<script src="activity-04_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="activity-04_files/libs/quarto-html/anchor.min.js"></script>
<link href="activity-04_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="activity-04_files/libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="activity-04_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="activity-04_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="activity-04_files/libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">


</head>

<body class="fullcontent">

<div id="quarto-content" class="page-columns page-rows-contents page-layout-article">

<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Bivariate viz</h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  

</header>

<p>```{r} #| echo: false #| results: hide #| message: false</p>
<section id="load-packages" class="level1" data-number="1">
<h1 data-number="1"><span class="header-section-number">1</span> Load packages</h1>
<p>library(tidyverse) library(tint) library(mosaic)</p>
<p>question_num &lt;- 0 NextQ &lt;- function() { question_num &lt;&lt;- question_num + 1 return(question_num) }</p>
<p>library(conflicted) conflict_prefer(“rename”, winner = “dplyr”) conflict_prefer(“filter”, winner = “dplyr”) conflict_prefer(“smiths”, winner = “tidyr”) conflict_prefer(“melt”, winner = “reshape2”) conflict_prefer(“count”, winner = “dplyr”) conflict_prefer(“group_by”, winner = “dplyr”) conflicts_prefer(ggthemes::theme_map) conflicts_prefer(base::sum) conflicts_prefer(base::min) conflicts_prefer(base::max) conflicts_prefer(base::mean) ```</p>
<div class="callout callout-style-default callout-caution callout-titled" title="Learning Goals">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Learning Goals
</div>
</div>
<div class="callout-body-container callout-body">
<p>**Warm-up (together)**</p>
<ul>
<li>Review univariate viz ideas and code.</li>
</ul>
<p>**Exercises (in groups)**</p>
<ul>
<li>Explore how to build and interpret visualizations of **bivariate**, i.e.&nbsp;two variable, relationships.</li>
</ul>
</div>
</div>
<div class="callout callout-style-default callout-note callout-titled" title="Additional Resources">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Additional Resources
</div>
</div>
<div class="callout-body-container callout-body">
<p>For more information about the topics covered in this chapter, refer to the resources below:</p>
<ul>
<li>[ggplot demo (YouTube)](https://www.youtube.com/watch?v=1SYzVMH62yw&amp;list=PLyEH7o09I467e8zck95awweg_bGuLzqjz&amp;index=8) by Lisa Lendway</li>
<li>[common ggplot mistakes (YouTube)](https://www.youtube.com/watch?v=j7F-IdJAOJs&amp;list=PLyEH7o09I467e8zck95awweg_bGuLzqjz&amp;index=8) by Lisa Lendway</li>
<li>[Visualizing amounts (html)](https://clauswilke.com/dataviz/visualizing-amounts.html) by Wilke</li>
<li>[Visualizing many distributions at once (html)](https://clauswilke.com/dataviz/boxplots-violins.html) by Wilke</li>
</ul>
</div>
</div>
<div class="callout callout-style-default callout-important callout-titled" title="Instructions">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Instructions
</div>
</div>
<div class="callout-body-container callout-body">
<p>**General**</p>
<ul>
<li>Be kind to yourself.</li>
<li>Collaborate with and be kind to others. You are expected to work together as a group.</li>
<li>Ask questions. Remember that we won’t discuss these exercises as a class.</li>
</ul>
<p>**Activity Specific**</p>
<p>Help each other with the following:</p>
<ul>
<li>Create a new Quarto document in the activities folder of your portfolio project and do not forgot to include it in `_quarto.yml` file. Then click the `&lt;/&gt; Code` link at the top right corner of this page and copy the code into the created Quarto document. This is where you’ll take notes. Remember that the portfolio is yours, so take notes in whatever way is best for you.</li>
<li>**Don’t start the Exercises section before we get there as a class.** First, engage in class discussion and eventually collaborate with your group on the exercises!</li>
<li>Go slow! Don’t worry about memorizing the code, but *do* slow down to examine it, *even if* you’re not asked explicitly about the code. Think about:</li>
<li>How the data variables are used in the plot.</li>
<li>What `geom` the plot uses.</li>
<li>How color and fill work for the `geom` you’re using.</li>
<li>There are some coding “intuition checks” along the way. The goal here is to start connecting to and expanding upon the structure of our `ggplot()` code. Don’t spend more than a few minutes trying these out. If you don’t get it, no problem! You can move on and learn the code in the next exercise.</li>
<li>The goal is for every student to finish the required exercises before we meet again. After that, choose your own adventure!</li>
<li>If you’re feeling like the required exercises gave you plenty to chew on, simply stop the activity. Go back and review the material you learned. *You never need to think about the optional exercises.*</li>
<li>If you’re feeling like your brain still has some space after completing the required exercises, try the optional ones. These exercises are either “bonus” visualizations or intuition checks about some material coming up.</li>
</ul>
</div>
</div>
<section id="review" class="level2" data-number="1.1">
<h2 data-number="1.1" class="anchored" data-anchor-id="review"><span class="header-section-number">1.1</span> Review</h2>
<p>Let’s review some *univariate* concepts and code using our class survey data. If the answers aren’t at the top of your mind, don’t fret! We’ve barely started speaking this new language, and learned a ton of vocab last week, so you naturally won’t remember it all.</p>
<p>```{r} # Import data survey &lt;- read.csv(“https://ajohns24.github.io/data/112/about_us_2024.csv”)</p>
</section>
</section>
<section id="how-many-students-have-now-filled-out-the-survey" class="level1" data-number="2">
<h1 data-number="2"><span class="header-section-number">2</span> How many students have now filled out the survey?</h1>
</section>
<section id="what-type-of-variables-do-we-have" class="level1" data-number="3">
<h1 data-number="3"><span class="header-section-number">3</span> What type of variables do we have?</h1>
<p>```</p>
<section id="example-1-hangout-preferences" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="example-1-hangout-preferences">EXAMPLE 1: Hangout Preferences</h3>
<p>Students were asked, in that moment, where they’d most like to spend time outside. How did they answer? Was there a lot of agreement or a lot of variability in answers? Build and interpret a plot that helps address these questions while reviewing:</p>
<ul>
<li>“code as communication”</li>
<li>connecting with the components of a plot:</li>
<li>set up a **frame**</li>
<li>add a **layer** / geometric element</li>
<li>change the **theme**, e.g.&nbsp;axis labels, color, fill</li>
</ul>
<p>```{r} # Attach a package needed to use the ggplot function</p>
</section>
</section>
<section id="make-a-ggplot" class="level1" data-number="4">
<h1 data-number="4"><span class="header-section-number">4</span> Make a ggplot</h1>
<p>```</p>
<p>```{r echo=FALSE, message=FALSE} library(tidyverse) ```</p>
<section id="example-2-temperature-preferences" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="example-2-temperature-preferences">EXAMPLE 2: Temperature Preferences</h3>
<p>Students were asked about their ideal outdoor temperature, in degrees Celsius. How did they answer? What was the typical response? What was the range in responses? Were there any outliers? Build and interpret 2 plots that help address these questions.</p>
<p>```{r} ```</p>
<div class="callout callout-style-default callout-note callout-titled" title="Bar Charts vs. Histograms">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Bar Charts vs.&nbsp;Histograms
</div>
</div>
<div class="callout-body-container callout-body">
<p>Bar charts &amp; histograms can appear pretty similar, but they do different things.</p>
<ul>
<li>**Bar charts** count up the number of observations of each outcome of a variable. They’re good for *categorical* variables, or *quantitative* variables with only a handful of possible outcomes.</li>
<li>**Histograms** count up the number of observations that fall into different numerical *ranges* of variable. They’re good for *quantitative* variables, especially those with many different observed outcomes.</li>
</ul>
</div>
</div>
</section>
<section id="new-stuff" class="level2" data-number="4.1">
<h2 data-number="4.1" class="anchored" data-anchor-id="new-stuff"><span class="header-section-number">4.1</span> New stuff</h2>
<p>Thus far, we’ve been studying one variable at a time, using *univariate* plots. But once we get a sense of how individual variables behave on their own, our questions often turn to *relationships* among variables. For example, in our `hikes` data:</p>
<ul>
<li>How much `time` does it take to complete a hike? ------\&gt; How is `time` related to a hike’s `elevation`? What about its `length`?</li>
<li>How does difficult `rating` vary from hike to hike? -------\&gt; How is difficulty `rating` related to a hike’s `ascent`?</li>
</ul>
<section id="exploring-relationships" class="level3" data-number="4.1.1">
<h3 data-number="4.1.1" class="anchored" data-anchor-id="exploring-relationships"><span class="header-section-number">4.1.1</span> Exploring relationships</h3>
<p>Exploring univariate patterns often sparks follow-up questions about **relationships** between 2+ variables. Often, but not always, variables take on specific roles:</p>
<ul>
<li>**response variable**: the variable whose variability we would like to explain (`time` to complete a hike)</li>
<li>**predictors**: variables that might explain some of the variability in the response (a hike’s `elevation` or `length`)</li>
</ul>
<p>Visualizations can help explore:</p>
<ul>
<li>relationship *trends* (direction and form)</li>
<li>relationship *strength* (degree of variability from the trend)</li>
<li>*outliers* in the relationship</li>
</ul>
<section id="example-3" class="level4 unnumbered">
<h4 class="unnumbered anchored" data-anchor-id="example-3">EXAMPLE 3</h4>
<p>For each pair of variables below, sketch on paper a visualization of their relationship. Focus on general viz process, don’t worry about the exact details. The data here are totally made up.</p>
<ol type="a">
<li>3pm temperature (response) vs 9am temperature (predictor)</li>
</ol>
<p>```{r} data.frame(temp_3pm = c(24, 26, 20, 15, 15, 15), temp_9am = c(14, 18, 15, 13, 11, 11)) ```</p>
<ol start="2" type="a">
<li>3pm temperature (response) vs location (predictor)</li>
</ol>
<p>```{r} weather &lt;- data.frame(temp_3pm = c(24, 26, 20, 15, 15, 0, 40, 60, 57, 44, 51, 75), location = rep(c(“A”, “B”), each = 6)) weather ```</p>
<p>Think: How might we modify the below density plot of `temp_3pm` to distinguish between locations?</p>
<p>```{r} ggplot(weather, aes(x = temp_3pm)) + geom_density() ```</p>
<ol start="3" type="a">
<li>`rain_today` (the response) and `location` (the predictor)</li>
</ol>
<p>```{r} weather &lt;- data.frame(rain_today = c(“no”, “no”, “no”, “no”, “yes”, “no”, “yes”, “no”, “yes”, “yes”, “no”, “yes”), location = c(rep(“A”, 7), rep(“B”, 5))) weather ```</p>
<p>Think: How might we modify the below bar plot of `location` to distinguish between days on which it did or didn’t rain?</p>
<p>```{r} ggplot(weather, aes(x = location)) + geom_bar() ```</p>
</section>
</section>
<section id="general-guidance-for-building-bivariate-plots" class="level3" data-number="4.1.2">
<h3 data-number="4.1.2" class="anchored" data-anchor-id="general-guidance-for-building-bivariate-plots"><span class="header-section-number">4.1.2</span> General guidance for building bivariate plots</h3>
<p>As with univariate plots, an appropriate visualization for the relationship between 2 variables depends upon whether the variables are **quantitative** or **categorical**. In general:</p>
<ul>
<li>Each **quantitative variable** requires a new *axis* (or a quantitative *scale* if we run out of axes).</li>
<li>Each **categorical variable** requires a new way to “group” the graphic (eg: using colors, shapes, separate facets, etc)</li>
<li>For visualizations in which **overlap** in glyphs or plots obscures the patterns, try faceting or transparency.</li>
</ul>
</section>
</section>
<section id="exercises-required" class="level2" data-number="4.2">
<h2 data-number="4.2" class="anchored" data-anchor-id="exercises-required"><span class="header-section-number">4.2</span> Exercises (required)</h2>
<p>[Github user Tony McGovern](https://github.com/tonmcg/US_County_Level_Election_Results_08-20) has compiled and made available 2020/2016/2012 presidential election results for most of 3000+ U.S. counties, except Alaska. (Image: [Wikimedia Commons](https://commons.wikimedia.org/wiki/File:Map_of_USA_with_county_outlines_(black_%26_white).png))</p>
<p>![](https://upload.wikimedia.org/wikipedia/commons/6/68/Map_of_USA_with_county_outlines_%28black_%26_white%29.png)</p>
<p>A wrangled version of this data, is imported below, after being combined with:</p>
<ul>
<li>2013 county-level demographics from the `df_county_demographics` data set from the `choroplethr` R package</li>
<li>historical voting trends in the state in which the county falls (from &lt;https://www.270towin.com/content/blue-and-red-states&gt;):</li>
<li>red = consistently Republican</li>
<li>blue = consistently Democratic</li>
<li>purple = something in between</li>
</ul>
<p>```{r} # Load data elections &lt;- read.csv(“https://mac-stat.github.io/data/election_2020_county.csv”)</p>
</section>
</section>
<section id="check-it-out" class="level1" data-number="5">
<h1 data-number="5"><span class="header-section-number">5</span> Check it out</h1>
<p>head(elections) ```</p>
<p>We’ll use this data to explore voting outcomes within the U.S.’s 2-party system. Here’s a list of candidates by year:</p>
<p>| year | Republican candidate | Democratic candidate | |:-----|:---------------------|:---------------------| | 2020 | Donald Trump | Joe Biden | | 2016 | Donald Trump | Hillary Clinton | | 2012 | Mitt Romney | Barack Obama |</p>
<section id="exercise-0-review" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="exercise-0-review">Exercise 0: Review</h3>
<section id="part-a" class="level4 unnumbered">
<h4 class="unnumbered anchored" data-anchor-id="part-a">Part a</h4>
<p>How many, or roughly what percent, of the 3000+ counties did the Republican candidate win in 2020?</p>
<ul>
<li>Take a guess.</li>
<li>Then make a plot of the `winner` variable.</li>
<li>Then discuss what follow-up questions you might have (and that our data might help us answer).</li>
</ul>
<p>```{r} ```</p>
</section>
<section id="part-b" class="level4 unnumbered">
<h4 class="unnumbered anchored" data-anchor-id="part-b">Part b</h4>
<p>The `repub_pct_20` variable provides more detail about the Republican support in each county. Construct a plot of `repub_pct_20`.</p>
<p>Notice that the distribution of Republican support from county to county is slightly **left skewed** or **negatively skewed**.</p>
<p>What follow-up questions do you have?</p>
<p>```{r} ```</p>
</section>
</section>
<section id="exercise-1-quantitative-vs-quantitative-intuition-check" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="exercise-1-quantitative-vs-quantitative-intuition-check">Exercise 1: Quantitative vs Quantitative Intuition Check</h3>
<div class="callout callout-style-default callout-important callout-titled" title="Be Quick">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Be Quick
</div>
</div>
<div class="callout-body-container callout-body">
<p>Don’t spend more than 3 minutes on this!</p>
</div>
</div>
<p>Below is a **scatterplot** of the Republican support in 2020 vs 2016. Notice that:</p>
<ul>
<li>both variables are quantitative, and get their own axes</li>
<li>the *response* variable is on the y-axis, demonstrating how `repub_pct_20` might be predicted by `repub_pct_16`, not vice versa</li>
</ul>
<p>Try to replicate this using `ggplot()`. THINK:</p>
<ul>
<li>What info do you need to set up the canvas?</li>
<li>What geometric layer (`geom_???`) might add these dots / points for each county? We haven’t learned this yet, just take some guesses.</li>
</ul>
<p>![](https://mac-stat.github.io/images/112/scatterplot_demo.png){width=“50%”}</p>
<p>```{r} ```</p>
</section>
<section id="exercise-2-2-quantitiative-variables" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="exercise-2-2-quantitiative-variables">Exercise 2: 2 Quantitiative Variables</h3>
<p>Run each chunk below to build up a a scatterplot of `repub_pct_20` vs `repub_pct_16` with different *glyphs* representing each county. Address or think about any prompts in the comments (`#`).</p>
<p>```{r eval = FALSE} # Set up the plotting frame # How does this differ than the frame for our histogram of repub_pct_20 alone? ggplot(elections, aes(y = repub_pct_20, x = repub_pct_16)) ```</p>
<p>```{r eval = FALSE} # Add a layer of points for each county # Take note of the geom! ggplot(elections, aes(y = repub_pct_20, x = repub_pct_16)) + geom_point() ```</p>
<p>```{r eval = FALSE} # Change the shape of the points # What happens if you change the shape to another number? ggplot(elections, aes(y = repub_pct_20, x = repub_pct_16)) + geom_point(shape = 3) ```</p>
<p>```{r} # YOU TRY: Modify the code to make the points “orange” # NOTE: Try to anticipate if “color” or “fill” will be useful here. Then try both. ggplot(elections, aes(y = repub_pct_20, x = repub_pct_16)) + geom_point() ```</p>
<p>```{r eval = FALSE} # Add a layer that represents each county by the state it’s in # Take note of the geom and the info it needs to run! ggplot(elections, aes(y = repub_pct_20, x = repub_pct_16)) + geom_text(aes(label = state_abbr)) ```</p>
</section>
<section id="exercise-3-reflect" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="exercise-3-reflect">Exercise 3: Reflect</h3>
<p>Summarize the relationship between the Republican support in 2020 and 2016. Be sure to comment on:</p>
<ul>
<li>the strength of the relationship (weak/moderate/strong)\</li>
<li>the direction of the relationship (positive/negative)\</li>
<li>outliers (in what state do counties deviate from the national trend? Any ideas why this might be the case?)</li>
</ul>
</section>
<section id="exercise-4-visualizing-trend" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="exercise-4-visualizing-trend">Exercise 4: Visualizing trend</h3>
<p>The trend of the relationship between `repub_pct_20` and `repub_pct_16` is clearly positive and (mostly) linear. We can highlight this trend by adding a model “smooth” to the plot:</p>
<p>```{r eval = FALSE} ggplot(elections, aes(y = repub_pct_20, x = repub_pct_16)) + geom_point() + geom_smooth() ```</p>
<section id="part-a-1" class="level4 unnumbered">
<h4 class="unnumbered anchored" data-anchor-id="part-a-1">Part a</h4>
<p>Construct a new plot that contains the model smooth but does *not* include the individual point glyphs.</p>
<p>```{r} ```</p>
</section>
<section id="part-b-1" class="level4 unnumbered">
<h4 class="unnumbered anchored" data-anchor-id="part-b-1">Part b</h4>
<p>By default, `geom_smooth()` adds a smooth, localized model line. To examine the “best” *linear model*, we can specify `method = “lm”`. It’s pretty similar in this example!</p>
<p>```{r eval = FALSE} ggplot(elections, aes(y = repub_pct_20, x = repub_pct_16)) + geom_point() + geom_smooth(method = “lm”) ```</p>
</section>
</section>
<section id="exercise-5-your-turn" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="exercise-5-your-turn">Exercise 5: Your Turn</h3>
<p>To examine how the 2020 results are related to some county demographics, construct scatterplots of `repub_pct_20` vs `median_rent`, and `repub_pct_20` vs `median_age`. Summarize the relationship between these two variables and comment on which is the better predictor of `repub_pct_20`, `median_rent` or `median_age`.</p>
<p>```{r} # Scatterplot of repub_pct_20 vs median_rent</p>
</section>
</section>
<section id="scatterplot-of-repub_pct_20-vs-median_age" class="level1" data-number="6">
<h1 data-number="6"><span class="header-section-number">6</span> Scatterplot of repub_pct_20 vs median_age</h1>
<p>```</p>
<section id="exercise-6-a-sad-scatterplot" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="exercise-6-a-sad-scatterplot">Exercise 6: A Sad Scatterplot</h3>
<p>Next, let’s explore the relationship between a county’s 2020 Republican support `repub_pct_20` and the `historical` political trends in its state. In this case `repub_pct_20` is **quantitative**, but `historical` is **categorical**. Explain why a scatterplot might *not* be an effective visualization for exploring this relationship. (What questions does / doesn’t it help answer?)</p>
<p>```{r} ggplot(elections, aes(y = repub_pct_20, x = historical)) + geom_point() ```</p>
</section>
<section id="exercise-7-quantitative-vs-categorical----violins-boxes" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="exercise-7-quantitative-vs-categorical----violins-boxes">Exercise 7: Quantitative vs Categorical -- Violins &amp; Boxes</h3>
<p>Though the above scatterplot *did* group the counties by `historical` category, it’s nearly impossible to pick out meaningful patterns in 2020 Republican support in each category. Let’s try adding 2 different `geom` layers to the frame:</p>
<p>```{r eval = FALSE} # Side-by-side violin plots ggplot(elections, aes(y = repub_pct_20, x = historical)) + geom_violin() ```</p>
<p>```{r eval = FALSE} # Side-by-side boxplots (defined below) ggplot(elections, aes(y = repub_pct_20, x = historical)) + geom_boxplot() ```</p>
<p>Box plots are constructed from five numbers - the minimum, 25th percentile, median, 75th percentile, and maximum value of a quantitative variable:</p>
<p>![](https://mac-stat.github.io/images/112/boxplot.png){width=“50%”}</p>
<p>**REFLECT:**</p>
<p>Summarize what you’ve learned about the 2020 Republican county-level support within and between red/purple/blue states.</p>
</section>
<section id="exercise-8-quantitative-vs-categorical----intuition-check" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="exercise-8-quantitative-vs-categorical----intuition-check">Exercise 8: Quantitative vs Categorical -- Intuition Check</h3>
<div class="callout callout-style-default callout-important callout-titled" title="Be Quick">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Be Quick
</div>
</div>
<div class="callout-body-container callout-body">
<p>Don’t spend more than 3 minutes on this!</p>
</div>
</div>
<p>We can also visualize the relationship between `repub_pct_20` and `historical` using our familiar density plots. In the plot below, notice that we simply created a separate density plot for each `historical` category. (The plot itself is “bad” but we’ll fix it below.) Try to adjust the code chunk below, which starts with a density plot of `repub_pct_20` alone, to re-create this image.</p>
<p>![](https://mac-stat.github.io/images/112/density_demo.png){width=“50%”}</p>
<p>```{r} ggplot(elections, aes(x = repub_pct_20)) + geom_density() ```</p>
</section>
<section id="exercise-9-quantitative-vs-categorical----density-plots" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="exercise-9-quantitative-vs-categorical----density-plots">Exercise 9: Quantitative vs Categorical -- Density Plots</h3>
<p>Work through the chunks below and address the comments therein.</p>
<p>```{r eval = FALSE} # Name two “bad” things about this plot ggplot(elections, aes(x = repub_pct_20, fill = historical)) + geom_density() ```</p>
<p>```{r eval = FALSE} # What does scale_fill_manual do? ggplot(elections, aes(x = repub_pct_20, fill = historical)) + geom_density() + scale_fill_manual(values = c(“blue”, “purple”, “red”)) ```</p>
<p>```{r eval = FALSE} # What does alpha = 0.5 do? # Play around with different values of alpha, between 0 and 1 ggplot(elections, aes(x = repub_pct_20, fill = historical)) + geom_density(alpha = 0.5) + scale_fill_manual(values = c(“blue”, “purple”, “red”)) ```</p>
<p>```{r eval = FALSE} # What does facet_wrap do?! ggplot(elections, aes(x = repub_pct_20, fill = historical)) + geom_density() + scale_fill_manual(values = c(“blue”, “purple”, “red”)) + facet_wrap(~ historical) ```</p>
<p>```{r eval = FALSE} # Let’s try a similar grouping strategy with a histogram instead of density plot. # Why is this terrible? ggplot(elections, aes(x = repub_pct_20, fill = historical)) + geom_histogram(color = “white”) + scale_fill_manual(values = c(“blue”, “purple”, “red”)) ```</p>
</section>
<section id="exercise-10" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="exercise-10">Exercise 10</h3>
<p>We’ve now learned 3 (of many) ways to visualize the relationship between a quantitative and categorical variable: side-by-side violins, boxplots, and density plots.</p>
<ul>
<li>Which do you like best?</li>
<li>What is one pro of density plots relative to boxplots?</li>
<li>What is one con of density plots relative to boxplots?</li>
</ul>
</section>
<section id="exercise-11-categorical-vs-categorical----intuition-check" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="exercise-11-categorical-vs-categorical----intuition-check">Exercise 11: Categorical vs Categorical -- Intuition Check</h3>
<p>Finally, let’s simply explore who *won* each county in 2020 (`winner_20`) and how this breaks down by `historical` voting trends in the state. That is, let’s explore the relationship between 2 categorical variables! Following the same themes as above, we can utilize grouping features such as fill/color or facets to distinguish between different categories of `winner_20` and `historical`.</p>
<div class="callout callout-style-default callout-important callout-titled" title="Be Quick">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Be Quick
</div>
</div>
<div class="callout-body-container callout-body">
<p>Spend at most 5 minutes on the following intuition check. Adjust the code below to recreate the following two plots.</p>
</div>
</div>
<p>![](https://mac-stat.github.io/images/112/barplot_demo.png){width=“60%”}</p>
<p>```{r} # Plot 1: adjust this to recreate the top plot ggplot(elections, aes(x = historical)) + geom_bar() ```</p>
<p>```{r} # Plot 2: adjust this to recreate the bottom plot ggplot(elections, aes(x = winner_20)) + geom_bar() ```</p>
</section>
<section id="exercise-12-categorical-vs-categorical" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="exercise-12-categorical-vs-categorical">Exercise 12: Categorical vs Categorical</h3>
<p>Construct the following 4 bar plot visualizations.</p>
<p>```{r eval = FALSE} # A stacked bar plot # How are the “historical” and “winner_20” variables mapped to the plot, i.e.&nbsp;what roles do they play? ggplot(elections, aes(x = historical, fill = winner_20)) + geom_bar() ```</p>
<p>```{r eval = FALSE} # A faceted bar plot ggplot(elections, aes(x = winner_20)) + geom_bar() + facet_wrap(~ historical) ```</p>
<p>```{r eval = FALSE} # A side-by-side bar plot # Note the new argument to geom_bar ggplot(elections, aes(x = historical, fill = winner_20)) + geom_bar(position = “dodge”) ```</p>
<p>```{r eval = FALSE} # A proportional bar plot # Note the new argument to geom_bar ggplot(elections, aes(x = historical, fill = winner_20)) + geom_bar(position = “fill”) ```</p>
<section id="part-a-2" class="level4 unnumbered">
<h4 class="unnumbered anchored" data-anchor-id="part-a-2">Part a</h4>
<p>Name one pro and one con of using the “proportional bar plot” instead of one of the other three options.</p>
</section>
<section id="part-b-2" class="level4 unnumbered">
<h4 class="unnumbered anchored" data-anchor-id="part-b-2">Part b</h4>
<p>What’s your favorite bar plot from part and why?</p>
</section>
</section>
<section id="exercise-13-practice-now-or-later" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="exercise-13-practice-now-or-later">Exercise 13: Practice (now or later)</h3>
<div class="callout callout-style-default callout-important callout-titled" title="Decide">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Decide
</div>
</div>
<div class="callout-body-container callout-body">
<p>Decide what’s best for you:</p>
<ul>
<li>Try this extra practice now.</li>
<li>Reflect on the above exercises and come back to this extra practice later (but before the next class).</li>
</ul>
</div>
</div>
<p>Import some daily weather data from a few locations in Australia:</p>
<p>```{r} weather &lt;- read.csv(“https://mac-stat.github.io/data/weather_3_locations.csv”) ```</p>
<p>Construct plots that address the research questions in each chunk. You might make multiple plots--there are many ways to do things!. However, don’t just throw spaghetti at the wall.</p>
<p>Reflect before doing anything. What types of variables are these? How might you plot just 1 of the variables, and then tweak the plot to incorporate the other?</p>
<p>```{r} # How do 3pm temperatures (temp3pm) differ by location?</p>
<p>```</p>
<p>```{r} # How might we predict the 3pm temperature (temp3pm) by the 9am temperature (temp9am)?</p>
<p>```</p>
<p>```{r} # How do the number of rainy days (raintoday) differ by location?</p>
<p>```</p>
</section>
<section id="exercises-optional" class="level2" data-number="6.1">
<h2 data-number="6.1" class="anchored" data-anchor-id="exercises-optional"><span class="header-section-number">6.1</span> Exercises (optional)</h2>
<p>The above visualizations are foundational and important. But they’re not the only way to visualize the variables in our dataset.</p>
<section id="optional-exercise-1-many-categories" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="optional-exercise-1-many-categories">Optional Exercise 1: Many Categories</h3>
<p>Suppose we wanted to better understand how the 2020 Republican support varied from county to county within each **state**. Since `repub_pct_20` is quantitative and `state_abbr` is categorical, we *could* make a density plot of `repub_pct_20` for each state. Reflect on why this is bad.</p>
<p>```{r} ggplot(elections, aes(x = repub_pct_20, fill = state_abbr)) + geom_density(alpha = 0.5) ```</p>
<p>A facet wrap would also be bad!</p>
<p>```{r fig.width = 8, fig.height = 8} ggplot(elections, aes(x = repub_pct_20)) + geom_density(alpha = 0.5) + facet_wrap(~ state_abbr) ```</p>
<p>When we want to compare the distribution of some quantitative outcome among *many* groups / categories, a **ridgeline plot** can be a good option. These are also called **joy plots**, named after the album cover for “Unknown Pleasures” by Joy Division. (Look it up!) To make a ridgeline plot, we can use the `geom_density_ridges()` function from the `ggridges` package.</p>
<p>```{r fig.height = 10, fig.width = 8, eval = FALSE} # Install ggridges package library(ggridges)</p>
</section>
</section>
</section>
<section id="make-our-first-joy-plot" class="level1" data-number="7">
<h1 data-number="7"><span class="header-section-number">7</span> Make our first joy plot</h1>
</section>
<section id="think-what-dont-you-like-about-this" class="level1" data-number="8">
<h1 data-number="8"><span class="header-section-number">8</span> THINK: What DON’T you like about this?</h1>
<p>ggplot(elections, aes(x = repub_pct_20, y = state_abbr)) + geom_density_ridges() ```</p>
<p>```{r fig.height = 10, fig.width = 8, eval = FALSE} # Let’s put the states in order by Republican support, not alphabet # How do you think fct_reorder works? We’ll learn about this later in the semester. ggplot(elections, aes(x = repub_pct_20, y = fct_reorder(state_abbr, repub_pct_20))) + geom_density_ridges(alpha = 0.5) ```</p>
<p>```{r fig.height = 10, fig.width = 8} # YOUR TURN: color/fill the ridges according to a state’s historical voting patterns # and add meaningful axis labels</p>
<p>```</p>
<p>**Follow-up questions**</p>
<ul>
<li>Which states tend to have the most variability in outcomes from county to county? The least?</li>
<li>What other interesting patterns do you notice?</li>
<li>Does this plot prompt any other questions?</li>
</ul>
<section id="optional-exercise-2-total-outcomes-by-state" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="optional-exercise-2-total-outcomes-by-state">Optional Exercise 2: Total Outcomes by State</h3>
<p>Let’s import some new data and counts up the total votes (Republican and Democratic) by state, not county. This was **wrangled** from the elections data!</p>
<p>```{r} elections_by_state &lt;- read.csv(“https://mac-stat.github.io/data/election_2020_by_state.csv”) ```</p>
<p>For example, we might make a scatterplot of the 2020 vs 2016 outcomes:</p>
<p>```{r} ggplot(elections_by_state, aes(y = repub_pct_20, x = repub_pct_16)) + geom_point() ```</p>
<p>BUT this isn’t the easiest way to communicate or identify the changes from 1 year to the next.</p>
<p>```{r fig.height = 10, fig.width = 8} # YOU TRY # Start by creating a “scatterplot” of state_abbr (y-axis) by 2020 Republican support on the x-axis # Color the points red # Scroll to solutions below when you’re ready</p>
<p>```</p>
<p>```{r fig.height = 10, fig.width = 8} # Check it out ggplot(elections_by_state, aes(x = repub_pct_20, y = state_abbr)) + geom_point(color = “red”) ```</p>
<p>```{r fig.height = 10, fig.width = 8} # YOU TRY # Reorder the states in terms of their 2020 Republican support (not alphabet) # Scroll to solutions below when you’re ready</p>
<p>```</p>
<p>```{r fig.height = 10, fig.width = 8} # Check it out ggplot(elections_by_state, aes(x = repub_pct_20, y = fct_reorder(state_abbr, repub_pct_20))) + geom_point(color = “red”) ```</p>
<p>```{r fig.height = 10, fig.width = 8} # Finally, add ANOTHER layer of points for the 2016 outcomes # What info does this new geom_point() layer need to run? ggplot(elections_by_state, aes(x = repub_pct_20, y = fct_reorder(state_abbr, repub_pct_20))) + geom_point(color = “red”) + geom_point(aes(x = repub_pct_16, y = state_abbr)) ```</p>
<p>**Reflect on the following**</p>
<ul>
<li>What do you think this plot needs? Try it! You might need to do some digging online.</li>
<li>Summarize the main takeaways from the plots. Which states changed the most from 2016 to 2020? The least? Where did the Republican support increase? Where did it decrease?</li>
<li>What other questions are you left with?</li>
</ul>
</section>
<section id="solutions" class="level2" data-number="8.1">
<h2 data-number="8.1" class="anchored" data-anchor-id="solutions"><span class="header-section-number">8.1</span> Solutions</h2>
<p>&lt;details&gt;</p>
<p>&lt;summary&gt;Click for Solutions&lt;/summary&gt;</p>
<p>```{r} # Import data survey &lt;- read.csv(“https://ajohns24.github.io/data/112/about_us_2024.csv”)</p>
</section>
</section>
<section id="how-many-students-have-now-filled-out-the-survey-1" class="level1" data-number="9">
<h1 data-number="9"><span class="header-section-number">9</span> How many students have now filled out the survey?</h1>
<p>nrow(survey)</p>
</section>
<section id="what-type-of-variables-do-we-have-1" class="level1" data-number="10">
<h1 data-number="10"><span class="header-section-number">10</span> What type of variables do we have?</h1>
<p>str(survey) ```</p>
<p>**EXAMPLE 1: Hangout preferences**</p>
<p>```{r} # Attach a package needed to use the ggplot function library(tidyverse)</p>
</section>
<section id="make-a-ggplot-1" class="level1" data-number="11">
<h1 data-number="11"><span class="header-section-number">11</span> Make a ggplot</h1>
<p>ggplot(survey, aes(x = hangout)) + geom_bar() ```</p>
<p>**EXAMPLE 2: Temperature preferences**</p>
<p>```{r} ggplot(survey, aes(x = fave_temp)) + geom_histogram(color = “white”, binwidth = 5)</p>
<p>ggplot(survey, aes(x = fave_temp)) + geom_density() ```</p>
<section id="exercise-0" class="level3" data-number="11.0.1">
<h3 data-number="11.0.1" class="anchored" data-anchor-id="exercise-0"><span class="header-section-number">11.0.1</span> Exercise 0:</h3>
<p>```{r} ggplot(elections, aes(x = winner_20)) + geom_bar() ggplot(elections, aes(x = repub_pct_20)) + geom_histogram(color = “white”) ggplot(elections, aes(x = repub_pct_20)) + geom_density() ```</p>
</section>
<section id="exercise-1-quantitative-vs-quantitative-intuition-check-1" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="exercise-1-quantitative-vs-quantitative-intuition-check-1">Exercise 1: quantitative vs quantitative intuition check</h3>
<p>See next exercise.</p>
</section>
<section id="exercise-2-2-quantitiative-variables-1" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="exercise-2-2-quantitiative-variables-1">Exercise 2: 2 quantitiative variables</h3>
<p>```{r} # Set up the plotting frame # How does this differ than the frame for our histogram of repub_pct_20 alone? # ANSWER: we added a y-axis variable ggplot(elections, aes(y = repub_pct_20, x = repub_pct_16))</p>
</section>
</section>
<section id="add-a-layer-of-points-for-each-county" class="level1" data-number="12">
<h1 data-number="12"><span class="header-section-number">12</span> Add a layer of points for each county</h1>
</section>
<section id="take-note-of-the-geom-geom_point" class="level1" data-number="13">
<h1 data-number="13"><span class="header-section-number">13</span> Take note of the geom: geom_point</h1>
<p>ggplot(elections, aes(y = repub_pct_20, x = repub_pct_16)) + geom_point()</p>
</section>
<section id="change-the-shape-of-the-points" class="level1" data-number="14">
<h1 data-number="14"><span class="header-section-number">14</span> Change the shape of the points</h1>
</section>
<section id="what-happens-if-you-change-the-shape-to-another-number" class="level1" data-number="15">
<h1 data-number="15"><span class="header-section-number">15</span> What happens if you change the shape to another number?</h1>
<p>ggplot(elections, aes(y = repub_pct_20, x = repub_pct_16)) + geom_point(shape = 3)</p>
</section>
<section id="you-try-modify-the-code-to-make-the-points-orange" class="level1" data-number="16">
<h1 data-number="16"><span class="header-section-number">16</span> YOU TRY: Modify the code to make the points “orange”</h1>
</section>
<section id="note-try-to-anticipate-if-color-or-fill-will-be-useful-here.-then-try-both." class="level1" data-number="17">
<h1 data-number="17"><span class="header-section-number">17</span> NOTE: Try to anticipate if “color” or “fill” will be useful here. Then try both.</h1>
<p>ggplot(elections, aes(y = repub_pct_20, x = repub_pct_16)) + geom_point(color = “orange”)</p>
</section>
<section id="add-a-layer-that-represents-each-county-by-the-state-its-in" class="level1" data-number="18">
<h1 data-number="18"><span class="header-section-number">18</span> Add a layer that represents each county by the state it’s in</h1>
</section>
<section id="take-note-of-the-geom-and-the-info-it-needs-to-run" class="level1" data-number="19">
<h1 data-number="19"><span class="header-section-number">19</span> Take note of the geom and the info it needs to run!</h1>
<p>ggplot(elections, aes(y = repub_pct_20, x = repub_pct_16)) + geom_text(aes(label = state_abbr)) ```</p>
<section id="exercise-3-reflect-1" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="exercise-3-reflect-1">Exercise 3: Reflect</h3>
<p>There’s a strong, positive association -- the higher the Republican support in 2016, the higher it was in 2020. There are some counties in Texas and Utah where the R support in 2020 was disproportionately higher than in 2016.</p>
</section>
<section id="exercise-4-visualizing-trend-1" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="exercise-4-visualizing-trend-1">Exercise 4: Visualizing trend</h3>
<p>```{r} ggplot(elections, aes(y = repub_pct_20, x = repub_pct_16)) + geom_point() + geom_smooth() ```</p>
<section id="part-a-3" class="level4 unnumbered">
<h4 class="unnumbered anchored" data-anchor-id="part-a-3">Part a</h4>
<p>```{r} ggplot(elections, aes(y = repub_pct_20, x = repub_pct_16)) + geom_smooth() ```</p>
</section>
<section id="part-b-3" class="level4 unnumbered">
<h4 class="unnumbered anchored" data-anchor-id="part-b-3">Part b</h4>
<p>```{r} ggplot(elections, aes(y = repub_pct_20, x = repub_pct_16)) + geom_point() + geom_smooth(method = “lm”) ```</p>
</section>
</section>
<section id="exercise-5-your-turn-1" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="exercise-5-your-turn-1">Exercise 5: Your turn</h3>
<p>There’s a moderate, positive association between R support and median age -- the older the average age in a county, the higher the R support tends to be. However, there’s a stronger, *negative* association between R support and median rent -- the higher the rent (a proxy for cost of living), the lower the R support tends to be.</p>
<p>```{r} # Scatterplot of repub_pct_20 vs median_rent ggplot(elections, aes(y = repub_pct_20, x = median_rent)) + geom_point()</p>
</section>
</section>
<section id="scatterplot-of-repub_pct_20-vs-median_age-1" class="level1" data-number="20">
<h1 data-number="20"><span class="header-section-number">20</span> Scatterplot of repub_pct_20 vs median_age</h1>
<p>ggplot(elections, aes(y = repub_pct_20, x = median_age)) + geom_point()</p>
<p>```</p>
<section id="exercise-6-a-sad-scatterplot-1" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="exercise-6-a-sad-scatterplot-1">Exercise 6: A sad scatterplot</h3>
<p>See next exercise.</p>
</section>
<section id="exercise-7-quantitative-vs-categorical----violins-boxes-1" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="exercise-7-quantitative-vs-categorical----violins-boxes-1">Exercise 7: quantitative vs categorical -- violins &amp; boxes</h3>
<p>```{r } # Side-by-side violin plots ggplot(elections, aes(y = repub_pct_20, x = historical)) + geom_violin()</p>
</section>
</section>
<section id="side-by-side-boxplots-defined-below" class="level1" data-number="21">
<h1 data-number="21"><span class="header-section-number">21</span> Side-by-side boxplots (defined below)</h1>
<p>ggplot(elections, aes(y = repub_pct_20, x = historical)) + geom_boxplot() ```</p>
<p>**REFLECT:**</p>
<p>There’s quite a bit of range in county-level R support within blue, purple, and red states. However, R support tends to be higher in red states and lower in blue states.</p>
<section id="exercise-8-quantitative-vs-categorical----intuition-check-1" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="exercise-8-quantitative-vs-categorical----intuition-check-1">Exercise 8: quantitative vs categorical -- intuition check</h3>
<p>See next exercise.</p>
</section>
<section id="exercise-9-quantitative-vs-categorical----density-plots-1" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="exercise-9-quantitative-vs-categorical----density-plots-1">Exercise 9: quantitative vs categorical -- density plots</h3>
<p>```{r} # The colors used don’t match up with the blue, purple, red labels # The density plots are on top of each other ggplot(elections, aes(x = repub_pct_20, fill = historical)) + geom_density()</p>
</section>
</section>
<section id="scale_fill_manual-hard-codes-or-defines-what-colors-to-use-for-the-fill-categories" class="level1" data-number="22">
<h1 data-number="22"><span class="header-section-number">22</span> scale_fill_manual “hard codes” or defines what colors to use for the fill categories</h1>
<p>ggplot(elections, aes(x = repub_pct_20, fill = historical)) + geom_density() + scale_fill_manual(values = c(“blue”, “purple”, “red”))</p>
</section>
<section id="alpha-0.5-adds-transparency" class="level1" data-number="23">
<h1 data-number="23"><span class="header-section-number">23</span> alpha = 0.5 adds transparency</h1>
</section>
<section id="the-closer-alpha-is-to-0-the-more-transparent." class="level1" data-number="24">
<h1 data-number="24"><span class="header-section-number">24</span> the closer alpha is to 0, the more transparent.</h1>
</section>
<section id="the-closer-alpha-is-to-1-the-more-opaque." class="level1" data-number="25">
<h1 data-number="25"><span class="header-section-number">25</span> the closer alpha is to 1, the more opaque.</h1>
<p>ggplot(elections, aes(x = repub_pct_20, fill = historical)) + geom_density(alpha = 0.5) + scale_fill_manual(values = c(“blue”, “purple”, “red”))</p>
</section>
<section id="facet_wrap-separates-the-density-plots-into-facets-for-each-historical-group" class="level1" data-number="26">
<h1 data-number="26"><span class="header-section-number">26</span> facet_wrap separates the density plots into “facets” for each historical group</h1>
<p>ggplot(elections, aes(x = repub_pct_20, fill = historical)) + geom_density() + scale_fill_manual(values = c(“blue”, “purple”, “red”)) + facet_wrap(~ historical)</p>
</section>
<section id="lets-try-a-similar-grouping-strategy-with-a-histogram-instead-of-density-plot." class="level1" data-number="27">
<h1 data-number="27"><span class="header-section-number">27</span> Let’s try a similar grouping strategy with a histogram instead of density plot.</h1>
</section>
<section id="why-is-this-terrible" class="level1" data-number="28">
<h1 data-number="28"><span class="header-section-number">28</span> Why is this terrible?</h1>
<p>ggplot(elections, aes(x = repub_pct_20, fill = historical)) + geom_histogram(color = “white”) + scale_fill_manual(values = c(“blue”, “purple”, “red”)) ```</p>
<section id="exercise-10-1" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="exercise-10-1">Exercise 10</h3>
<ul>
<li><p>One pro of density plots relative to boxplots: doesn’t oversimplify the data / boil the data down to just 5 numbers.</p></li>
<li><p>Name one con of density plots relative to boxplots: boxplots can be easier to interpret</p></li>
</ul>
</section>
<section id="exercise-11-categorical-vs-categorical-intuition-check" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="exercise-11-categorical-vs-categorical-intuition-check">Exercise 11: categorical vs categorical intuition check</h3>
<p>see exercise below</p>
</section>
<section id="exercise-12-categorical-vs-categorical-1" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="exercise-12-categorical-vs-categorical-1">Exercise 12: categorical vs categorical</h3>
<p>```{r} # A stacked bar plot # historical = x axis / bar categories # winner_20 = fills the bars ggplot(elections, aes(x = historical, fill = winner_20)) + geom_bar()</p>
</section>
</section>
<section id="a-faceted-bar-plot" class="level1" data-number="29">
<h1 data-number="29"><span class="header-section-number">29</span> A faceted bar plot</h1>
<p>ggplot(elections, aes(x = winner_20)) + geom_bar() + facet_wrap(~ historical)</p>
</section>
<section id="a-side-by-side-bar-plot" class="level1" data-number="30">
<h1 data-number="30"><span class="header-section-number">30</span> A side-by-side bar plot</h1>
</section>
<section id="note-the-new-argument-to-geom_bar" class="level1" data-number="31">
<h1 data-number="31"><span class="header-section-number">31</span> Note the new argument to geom_bar</h1>
<p>ggplot(elections, aes(x = historical, fill = winner_20)) + geom_bar(position = “dodge”)</p>
</section>
<section id="a-proportional-bar-plot" class="level1" data-number="32">
<h1 data-number="32"><span class="header-section-number">32</span> A proportional bar plot</h1>
</section>
<section id="note-the-new-argument-to-geom_bar-1" class="level1" data-number="33">
<h1 data-number="33"><span class="header-section-number">33</span> Note the new argument to geom_bar</h1>
<p>ggplot(elections, aes(x = historical, fill = winner_20)) + geom_bar(position = “fill”) ```</p>
<section id="part-a-4" class="level4 unnumbered">
<h4 class="unnumbered anchored" data-anchor-id="part-a-4">Part a</h4>
<p>pro = easier to compare the relative outcomes in blue vs purple vs red states con = lose track of how many counties fall into blue vs purple vs red states</p>
</section>
<section id="exercise-13-practice-now-or-later-1" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="exercise-13-practice-now-or-later-1">Exercise 13: Practice (now or later)</h3>
<p>```{r} weather &lt;- read.csv(“https://mac-stat.github.io/data/weather_3_locations.csv”)</p>
</section>
</section>
<section id="how-do-3pm-temperatures-temp3pm-differ-by-location" class="level1" data-number="34">
<h1 data-number="34"><span class="header-section-number">34</span> How do 3pm temperatures (temp3pm) differ by location?</h1>
<p>ggplot(weather, aes(x = temp3pm, fill = location)) + geom_density(alpha = 0.5) ggplot(weather, aes(y = temp3pm, x = location)) + geom_boxplot()</p>
</section>
<section id="how-might-we-predict-the-3pm-temperature-temp3pm-by-the-9am-temperature-temp9am" class="level1" data-number="35">
<h1 data-number="35"><span class="header-section-number">35</span> How might we predict the 3pm temperature (temp3pm) by the 9am temperature (temp9am)?</h1>
<p>ggplot(weather, aes(y = temp3pm, x = temp9am)) + geom_point()</p>
</section>
<section id="how-do-the-number-of-rainy-days-raintoday-differ-by-location" class="level1" data-number="36">
<h1 data-number="36"><span class="header-section-number">36</span> How do the number of rainy days (raintoday) differ by location?</h1>
<p>ggplot(weather, aes(x = location, fill = raintoday)) + geom_bar() ```</p>
<section id="optional-exercise-1-dealing-with-lots-of-categories" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="optional-exercise-1-dealing-with-lots-of-categories">Optional exercise 1: Dealing with lots of categories</h3>
<p>```{r fig.height = 10, fig.width = 8} # Install ggridges package library(ggridges)</p>
</section>
</section>
<section id="make-our-first-joy-plot-1" class="level1" data-number="37">
<h1 data-number="37"><span class="header-section-number">37</span> Make our first joy plot</h1>
</section>
<section id="think-what-dont-you-like-about-this-1" class="level1" data-number="38">
<h1 data-number="38"><span class="header-section-number">38</span> THINK: What DON’T you like about this?</h1>
<p>ggplot(elections, aes(x = repub_pct_20, y = state_abbr)) + geom_density_ridges()</p>
</section>
<section id="lets-put-the-states-in-order-by-republican-support-not-alphabet" class="level1" data-number="39">
<h1 data-number="39"><span class="header-section-number">39</span> Let’s put the states in order by Republican support, not alphabet</h1>
</section>
<section id="how-do-you-think-fct_reorder-works-well-learn-about-this-later-in-the-semester." class="level1" data-number="40">
<h1 data-number="40"><span class="header-section-number">40</span> How do you think fct_reorder works? We’ll learn about this later in the semester.</h1>
<p>ggplot(elections, aes(x = repub_pct_20, y = fct_reorder(state_abbr, repub_pct_20))) + geom_density_ridges(alpha = 0.5)</p>
</section>
<section id="your-turn-colorfill-the-ridges-according-to-a-states-historical-voting-patterns" class="level1" data-number="41">
<h1 data-number="41"><span class="header-section-number">41</span> YOUR TURN: color/fill the ridges according to a state’s historical voting patterns</h1>
</section>
<section id="and-add-meaningful-axis-labels" class="level1" data-number="42">
<h1 data-number="42"><span class="header-section-number">42</span> and add meaningful axis labels</h1>
<p>ggplot(elections, aes(x = repub_pct_20, y = fct_reorder(state_abbr, repub_pct_20), fill = historical)) + geom_density_ridges(alpha = 0.5) + labs(y = “state”, x = “2020 Republican support (%)”) + scale_fill_manual(values = c(“blue”, “purple”, “red”))</p>
<p>```</p>
<section id="optional-exercise-2-total-outcomes-by-state-1" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="optional-exercise-2-total-outcomes-by-state-1">Optional exercise 2: total outcomes by state</h3>
<p>```{r fig.height = 10, fig.width = 8} elections_by_state &lt;- read.csv(“https://mac-stat.github.io/data/election_2020_by_state.csv”)</p>
<p>ggplot(elections_by_state, aes(y = repub_pct_20, x = repub_pct_16)) + geom_point()</p>
</section>
</section>
<section id="you-try" class="level1" data-number="43">
<h1 data-number="43"><span class="header-section-number">43</span> YOU TRY</h1>
</section>
<section id="start-by-creating-a-scatterplot-of-state_abbr-y-axis-by-2020-republican-support-on-the-x-axis" class="level1" data-number="44">
<h1 data-number="44"><span class="header-section-number">44</span> Start by creating a “scatterplot” of state_abbr (y-axis) by 2020 Republican support on the x-axis</h1>
</section>
<section id="color-the-points-red" class="level1" data-number="45">
<h1 data-number="45"><span class="header-section-number">45</span> Color the points red</h1>
<p>ggplot(elections_by_state, aes(x = repub_pct_20, y = state_abbr)) + geom_point(color = “red”)</p>
</section>
<section id="you-try-1" class="level1" data-number="46">
<h1 data-number="46"><span class="header-section-number">46</span> YOU TRY</h1>
</section>
<section id="reorder-the-states-in-terms-of-their-2020-republican-support-not-alphabet" class="level1" data-number="47">
<h1 data-number="47"><span class="header-section-number">47</span> Reorder the states in terms of their 2020 Republican support (not alphabet)</h1>
<p>ggplot(elections_by_state, aes(x = repub_pct_20, y = fct_reorder(state_abbr, repub_pct_20))) + geom_point(color = “red”)</p>
</section>
<section id="finally-add-another-layer-of-points-for-the-2016-outcomes" class="level1" data-number="48">
<h1 data-number="48"><span class="header-section-number">48</span> Finally, add ANOTHER layer of points for the 2016 outcomes</h1>
</section>
<section id="what-info-does-this-new-geom_point-layer-need-to-run" class="level1" data-number="49">
<h1 data-number="49"><span class="header-section-number">49</span> What info does this new geom_point() layer need to run?</h1>
<p>ggplot(elections_by_state, aes(x = repub_pct_20, y = fct_reorder(state_abbr, repub_pct_20))) + geom_point(color = “red”) + geom_point(aes(x = repub_pct_16, y = state_abbr)) ```</p>
<p>&lt;/details&gt;</p>
</section>

</main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->



</body></html>